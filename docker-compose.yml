elasticsearch:
    build: ./elasticsearch
    ports:
        - "9200:9200"
    volumes:
        - "./elasticsearch/config:/usr/share/elasticsearch/config"
        - "./elasticsearch/data:/usr/share/elasticsearch/data"
        - "./elasticsearch/logs:/usr/share/elasticsearch/logs"

postgres:
    build: ./postgres
    volumes:
        - "./postgres/data/data:/var/lib/postresql/data"
    environment:
        - POSTGRES_PASSWORD=toto
    ports:
        - "5432:5432"

pythonapp:
    build: ./application
    command: sh run.sh & #python manage.py runserver 0.0.0.0:8000
    volumes:
        - "./application/language:/application"
    ports:
        - "8000:8000"
    links:
        - elasticsearch
        - postgres

client:
    build: ./client
    volumes:
        - "./client:/client"
        - "./client/config/nginx.conf:/etc/nginx/nginx.conf:ro"
    ports:
        - "8080:80"
    links:
        - pythonapp

